name: "Commit and Push"
description: "Add changes, Commit and Push to Target repo"

inputs:
  scope:
    description: "Scope in commit message"
    required: true
  dir:
    required: false
    default: "."
    description: "Working Directory"

runs:
  using: composite
  steps:
    - name: Commit & Push
      shell: bash
      run: |
        cd "${{ inputs.dir }}"
        git config user.name "${{ inputs.scope }}-bot"
        git config user.email "${{ inputs.scope }}@wliamp.io"
  
        git add -A
        git commit -m "${{ inputs.scope }} at $(date -u +'%Y-%m-%d %H:%M:%S')" \
          -m "$(git diff --cached --name-status)" || echo "âœ… No changes to commit"  
        git push origin main
